---
const lang = 'en'
import BaseLayout from '../../layouts/BaseLayout.astro'

const seoTitle = "Tải tài liệu - Catalog, Brochure, Hướng dẫn kỹ thuật | APPE JV"
const seoDescription = "Tải xuống catalog sản phẩm, brochure, tài liệu kỹ thuật, hướng dẫn sử dụng và chứng nhận chất lượng của APPE JV. Hỗ trợ khách hàng và đại lý."
const seoKeywords = [
  "tải catalog APPE",
  "brochure thức ăn chăn nuôi",
  "tài liệu kỹ thuật",
  "hướng dẫn sử dụng",
  "chứng nhận chất lượng",
  "download catalog"
]

const documents = [
  {
    id: 1,
    category: "Catalog",
    title: "Catalog Sản phẩm 2024",
    description: "Tổng hợp toàn bộ sản phẩm Pig Feed, Poultry Feed và Fish Feed",
    size: "12.5 MB",
    format: "PDF",
    date: "2024-01-15",
    downloads: 1250,
    thumbnail: "/docs/catalog-2024.jpg"
  },
  {
    id: 2,
    category: "Catalog",
    title: "Pig Feed Product Line",
    description: "Dòng sản phẩm thức ăn heo chi tiết với thành phần dinh dưỡng",
    size: "8.3 MB",
    format: "PDF",
    date: "2024-01-10",
    downloads: 890,
    thumbnail: "/docs/pig-feed-catalog.jpg"
  },
  {
    id: 3,
    category: "Brochure",
    title: "Giới thiệu công ty APPE JV",
    description: "Brochure giới thiệu về APPE JV, lịch sử, tầm nhìn và giá trị cốt lõi",
    size: "5.2 MB",
    format: "PDF",
    date: "2023-12-20",
    downloads: 650,
    thumbnail: "/docs/company-brochure.jpg"
  },
  {
    id: 4,
    category: "Technical",
    title: "Hướng dẫn bảo quản thức ăn",
    description: "Tài liệu kỹ thuật về cách bảo quản thức ăn chăn nuôi đúng cách",
    size: "2.1 MB",
    format: "PDF",
    date: "2024-02-01",
    downloads: 1100,
    thumbnail: "/docs/storage-guide.jpg"
  },
  {
    id: 5,
    category: "Technical",
    title: "Quy trình chăn nuôi heo thịt",
    description: "Hướng dẫn chi tiết quy trình chăn nuôi heo thịt hiệu quả",
    size: "6.8 MB",
    format: "PDF",
    date: "2024-01-25",
    downloads: 980,
    thumbnail: "/docs/pig-farming-guide.jpg"
  },
  {
    id: 6,
    category: "Manual",
    title: "Hướng dẫn sử dụng Pig Feed",
    description: "Hướng dẫn sử dụng và liều lượng thức ăn heo theo từng giai đoạn",
    size: "3.5 MB",
    format: "PDF",
    date: "2024-01-20",
    downloads: 1350,
    thumbnail: "/docs/pig-feed-manual.jpg"
  },
  {
    id: 7,
    category: "Manual",
    title: "Hướng dẫn sử dụng Poultry Feed",
    description: "Hướng dẫn sử dụng thức ăn gia cầm cho gà, vịt, ngan",
    size: "3.2 MB",
    format: "PDF",
    date: "2024-01-18",
    downloads: 780,
    thumbnail: "/docs/poultry-feed-manual.jpg"
  },
  {
    id: 8,
    category: "Certificate",
    title: "Chứng nhận ISO 9001:2015",
    description: "Chứng nhận hệ thống quản lý chất lượng ISO 9001:2015",
    size: "1.2 MB",
    format: "PDF",
    date: "2023-06-15",
    downloads: 450,
    thumbnail: "/docs/iso-certificate.jpg"
  },
  {
    id: 9,
    category: "Certificate",
    title: "Chứng nhận HACCP",
    description: "Chứng nhận an toàn thực phẩm HACCP",
    size: "1.5 MB",
    format: "PDF",
    date: "2023-08-20",
    downloads: 420,
    thumbnail: "/docs/haccp-certificate.jpg"
  },
  {
    id: 10,
    category: "Certificate",
    title: "Chứng nhận GMP",
    description: "Chứng nhận thực hành sản xuất tốt GMP",
    size: "1.3 MB",
    format: "PDF",
    date: "2023-07-10",
    downloads: 390,
    thumbnail: "/docs/gmp-certificate.jpg"
  }
]

const categories = ["Tất cả", "Catalog", "Brochure", "Technical", "Manual", "Certificate"]
---

<BaseLayout 
  title={seoTitle}
  description={seoDescription}
  keywords={seoKeywords}
  canonical="/en/tai-lieu"
>
  <!-- Hero Section -->
  <section class="pt-24 md:pt-32 pb-12 md:pb-16 bg-white">
    <div class="max-w-[980px] mx-auto px-4 sm:px-6">
      <div class="text-center mb-8">
        <h1 class="text-4xl sm:text-5xl md:text-6xl font-semibold text-gray-900 mb-4 tracking-tight leading-tight">
          Tài liệu tải xuống
        </h1>
        <p class="text-lg sm:text-xl text-gray-600 font-light leading-relaxed">
          Catalog, brochure, hướng dẫn kỹ thuật và chứng nhận
        </p>
      </div>

      <!-- Search Bar -->
      <div class="max-w-2xl mx-auto mb-8">
        <div class="relative">
          <input
            type="text"
            id="doc-search"
            placeholder="Tìm tài liệu..."
            class="w-full px-5 py-4 pr-12 text-[15px] bg-[#f5f5f7] border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 transition-all"
          />
          <svg class="absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
      </div>
    </div>
  </section>

  <!-- Filter Section -->
  <section class="py-8 bg-[#f5f5f7] border-y border-gray-200">
    <div class="max-w-[980px] mx-auto px-4 sm:px-6">
      <div class="flex items-center gap-3 overflow-x-auto pb-2 scrollbar-hide">
        <span class="text-[13px] text-gray-600 whitespace-nowrap">Danh mục:</span>
        {categories.map((category) => (
          <button
            class="category-filter px-4 py-2 text-[13px] font-medium rounded-full whitespace-nowrap transition-all hover:bg-white"
            data-category={category}
          >
            {category}
          </button>
        ))}
      </div>
    </div>
  </section>

  <!-- Documents Grid -->
  <section class="py-16 md:py-20 bg-white">
    <div class="max-w-[980px] mx-auto px-4 sm:px-6">
      <!-- Result Count -->
      <div class="mb-6">
        <p class="text-[15px] text-gray-600">
          Hiển thị <span id="doc-count" class="font-semibold text-gray-900">{documents.length}</span> tài liệu
        </p>
      </div>

      <!-- Documents Grid -->
      <div id="docs-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {documents.map((doc) => (
          <div 
            class="doc-card bg-[#f5f5f7] rounded-2xl overflow-hidden hover:bg-gray-100 transition-all group"
            data-category={doc.category}
            data-title={doc.title.toLowerCase()}
            data-description={doc.description.toLowerCase()}
          >
            <!-- Thumbnail -->
            <div class="aspect-[4/3] bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center">
              <svg class="w-16 h-16 text-white/80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
              </svg>
            </div>

            <!-- Content -->
            <div class="p-6">
              <div class="flex items-center gap-2 mb-3">
                <span class="inline-block px-2 py-1 bg-white rounded text-[11px] font-medium text-gray-600">
                  {doc.category}
                </span>
                <span class="text-[11px] text-gray-500">{doc.format}</span>
                <span class="text-[11px] text-gray-500">•</span>
                <span class="text-[11px] text-gray-500">{doc.size}</span>
              </div>

              <h3 class="text-[17px] font-semibold text-gray-900 mb-2 line-clamp-2">
                {doc.title}
              </h3>
              
              <p class="text-[13px] text-gray-600 mb-4 line-clamp-2">
                {doc.description}
              </p>

              <div class="flex items-center justify-between">
                <div class="flex items-center gap-1 text-[11px] text-gray-500">
                  <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                  </svg>
                  <span>{doc.downloads} lượt tải</span>
                </div>

                <button class="flex items-center gap-1.5 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-[13px] font-medium transition-all group-hover:gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                  </svg>
                  Tải xuống
                </button>
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- No Results -->
      <div id="no-results" class="hidden text-center py-12">
        <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
        </svg>
        <p class="text-[17px] text-gray-600">Không tìm thấy tài liệu phù hợp</p>
        <p class="text-[13px] text-gray-500 mt-2">Thử tìm kiếm với từ khóa khác</p>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 md:py-20 bg-[#f5f5f7]">
    <div class="max-w-[692px] mx-auto px-4 sm:px-6 text-center">
      <h2 class="text-3xl sm:text-4xl font-semibold text-gray-900 mb-4 tracking-tight">
        Cần hỗ trợ thêm?
      </h2>
      <p class="text-[17px] text-gray-600 mb-8 font-light">
        Liên hệ với chúng tôi để được tư vấn chi tiết
      </p>
      <div class="flex flex-col sm:flex-row gap-3 justify-center">
        <a 
          href="/en/contact"
          class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-[15px] font-medium transition-all"
        >
          Liên hệ ngay
        </a>
        <a 
          href="/en/products"
          class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-white hover:bg-gray-50 text-gray-900 rounded-xl text-[15px] font-medium transition-all border border-gray-200"
        >
          Xem sản phẩm
        </a>
      </div>
    </div>
  </section>

  <script>
    // Search functionality
    const searchInput = document.getElementById('doc-search') as HTMLInputElement
    const docCards = document.querySelectorAll('.doc-card')
    const docCount = document.getElementById('doc-count')
    const noResults = document.getElementById('no-results')
    const categoryFilters = document.querySelectorAll('.category-filter')

    let currentCategory = 'Tất cả'

    function filterDocs() {
      const searchTerm = searchInput?.value.toLowerCase() || ''
      let visibleCount = 0

      docCards.forEach((card) => {
        const title = card.getAttribute('data-title') || ''
        const description = card.getAttribute('data-description') || ''
        const category = card.getAttribute('data-category') || ''

        const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm)
        const matchesCategory = currentCategory === 'Tất cả' || category === currentCategory

        if (matchesSearch && matchesCategory) {
          card.classList.remove('hidden')
          visibleCount++
        } else {
          card.classList.add('hidden')
        }
      })

      if (docCount) docCount.textContent = visibleCount.toString()
      
      if (noResults) {
        if (visibleCount === 0) {
          noResults.classList.remove('hidden')
        } else {
          noResults.classList.add('hidden')
        }
      }
    }

    searchInput?.addEventListener('input', filterDocs)

    // Category filter
    categoryFilters.forEach((filter) => {
      filter.addEventListener('click', () => {
        categoryFilters.forEach((f) => {
          f.classList.remove('bg-gray-900', 'text-white')
          f.classList.add('bg-white', 'text-gray-900')
        })
        
        filter.classList.remove('bg-white', 'text-gray-900')
        filter.classList.add('bg-gray-900', 'text-white')
        
        currentCategory = filter.getAttribute('data-category') || 'Tất cả'
        filterDocs()
      })
    })

    // Set initial active filter
    const firstFilter = categoryFilters[0]
    if (firstFilter) {
      firstFilter.classList.add('bg-gray-900', 'text-white')
    }
  </script>

  <style>
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</BaseLayout>
