# Nixpacks Configuration for appejv-web (Astro)

[phases.setup]
nixPkgs = ["nodejs_20", "nginx"]

[phases.install]
cmds = ["npm install --legacy-peer-deps"]

[phases.build]
cmds = ["npm run build", "cp nginx.conf /app/nginx.conf"]

[start]
cmd = "nginx -c /app/nginx.conf -g 'daemon off;'"

[variables]
PORT = "4321"
NODE_ENV = "production"
